# Лабораторная работа №2

**Вариант №77807**

Цель работы - на выделенном узле создать и сконфигурировать новый кластер БД Postgres, саму БД, табличные пространства и новую роль, а также произвести наполнение базы в соответствии с заданием. Отчёт по работе должен содержать все команды по настройке, скрипты, а также измененные строки конфигурационных файлов.

Способ подключения к узлу из сети Интернет через helios:
ssh -J sXXXXXX@helios.cs.ifmo.ru:2222 postgresY@pgZZZ
Способ подключения к узлу из сети факультета:
ssh postgresY@pgZZZ
Номер выделенного узла pgZZZ, а также логин и пароль для подключения Вам выдаст преподаватель.

## Этап 1. Инициализация кластера БД

    Директория кластера: $HOME/ehz35
    Кодировка: ISO_8859_5
    Локаль: русская
    Параметры инициализации задать через аргументы команды

## Этап 2. Конфигурация и запуск сервера БД

    Способы подключения: 1) Unix-domain сокет в режиме peer; 2) сокет TCP/IP, только localhost
    Номер порта: 9807
    Способ аутентификации TCP/IP клиентов: по паролю SHA-256
    Остальные способы подключений запретить.
    Настроить следующие параметры сервера БД:
        max_connections
        shared_buffers
        temp_buffers
        work_mem
        checkpoint_timeout
        effective_cache_size
        fsync
        commit_delay
    Параметры должны быть подобраны в соответствии со сценарием OLTP:
    500 транзакций в секунду размером 8КБ; обеспечить высокую доступность (High Availability) данных.
    Директория WAL файлов: $HOME/euu73
    Формат лог-файлов: .log
    Уровень сообщений лога: INFO
    Дополнительно логировать: попытки подключения и завершение сессий

## Этап 3. Дополнительные табличные пространства и наполнение базы

    Создать новое табличное пространство для индексов: $HOME/kls16
    На основе template1 создать новую базу: lastgoldsoup
    Создать новую роль, предоставить необходимые права, разрешить подключение к базе.
    От имени новой роли (не администратора) произвести наполнение ВСЕХ созданных баз тестовыми наборами данных. ВСЕ табличные пространства должны использоваться по назначению.
    Вывести список всех табличных пространств кластера и содержащиеся в них объекты.